/**
 * This file was auto-generated by Fern from our API Definition.
 */
package com.kard.api.resources.transactions;

import com.kard.api.core.ClientOptions;
import com.kard.api.core.RequestOptions;
import com.kard.api.resources.transactions.requests.GetEarnedRewardsRequest;
import com.kard.api.resources.transactions.types.CreateAuditRequestBody;
import com.kard.api.resources.transactions.types.CreateAuditResponseBody;
import com.kard.api.resources.transactions.types.FraudulentTransactionObject;
import com.kard.api.resources.transactions.types.FraudulentTransactionRequestBody;
import com.kard.api.resources.transactions.types.GetEarnedRewardsResponse;
import com.kard.api.resources.transactions.types.TransactionsRequestBody;
import com.kard.api.resources.transactions.types.TransactionsResponse;
import java.util.concurrent.CompletableFuture;

public class AsyncTransactionsClient {
    protected final ClientOptions clientOptions;

    private final AsyncRawTransactionsClient rawClient;

    public AsyncTransactionsClient(ClientOptions clientOptions) {
        this.clientOptions = clientOptions;
        this.rawClient = new AsyncRawTransactionsClient(clientOptions);
    }

    /**
     * Get responses with HTTP metadata like headers
     */
    public AsyncRawTransactionsClient withRawResponse() {
        return this.rawClient;
    }

    /**
     * Call this endpoint to send all transactions made by all your enrolled users in your rewards program. The request body will depend on the transaction type.<br/>
     * Please use the correct type when calling the endpoint:
     * <ul>
     * <li><code>transaction</code>: These incoming transactions will be processed and matched by the Kard system. Learn more about the <a href="https://github.com/kard-financial/kard-postman#c-transaction-clo-matching">Transaction CLO Matching</a> flow here.</li>
     * <li><code>matchedTransaction</code>: For pre-matched transactions that need validation on match by the Kard system.</li>
     * <li><code>coreTransaction</code>: For transactions from core banking systems with limited card-level data.<br/></li>
     * </ul>
     * <p><b>Required scopes:</b> <code>transaction:write</code><br/>
     * <b>Note:</b> <code>Maximum of 500 transactions can be created per request</code>.</p>
     */
    public CompletableFuture<TransactionsResponse> create(String organizationId, TransactionsRequestBody request) {
        return this.rawClient.create(organizationId, request).thenApply(response -> response.body());
    }

    /**
     * Call this endpoint to send all transactions made by all your enrolled users in your rewards program. The request body will depend on the transaction type.<br/>
     * Please use the correct type when calling the endpoint:
     * <ul>
     * <li><code>transaction</code>: These incoming transactions will be processed and matched by the Kard system. Learn more about the <a href="https://github.com/kard-financial/kard-postman#c-transaction-clo-matching">Transaction CLO Matching</a> flow here.</li>
     * <li><code>matchedTransaction</code>: For pre-matched transactions that need validation on match by the Kard system.</li>
     * <li><code>coreTransaction</code>: For transactions from core banking systems with limited card-level data.<br/></li>
     * </ul>
     * <p><b>Required scopes:</b> <code>transaction:write</code><br/>
     * <b>Note:</b> <code>Maximum of 500 transactions can be created per request</code>.</p>
     */
    public CompletableFuture<TransactionsResponse> create(
            String organizationId, TransactionsRequestBody request, RequestOptions requestOptions) {
        return this.rawClient.create(organizationId, request, requestOptions).thenApply(response -> response.body());
    }

    /**
     * Call this endpoint to flag a submitted transaction as fraudulent. This will prevent it from being rewarded.<br/>
     * <p><b>Required scopes:</b>  <code>transaction:write</code><br/>
     * <b>Note:</b> <code>Maximum of 500 fraudulent transactions can be created per request</code>.</p>
     */
    public CompletableFuture<FraudulentTransactionObject> createFraudMarkers(
            String organizationId, FraudulentTransactionRequestBody request) {
        return this.rawClient.createFraudMarkers(organizationId, request).thenApply(response -> response.body());
    }

    /**
     * Call this endpoint to flag a submitted transaction as fraudulent. This will prevent it from being rewarded.<br/>
     * <p><b>Required scopes:</b>  <code>transaction:write</code><br/>
     * <b>Note:</b> <code>Maximum of 500 fraudulent transactions can be created per request</code>.</p>
     */
    public CompletableFuture<FraudulentTransactionObject> createFraudMarkers(
            String organizationId, FraudulentTransactionRequestBody request, RequestOptions requestOptions) {
        return this.rawClient
                .createFraudMarkers(organizationId, request, requestOptions)
                .thenApply(response -> response.body());
    }

    /**
     * Call this endpoint to request that a particular transaction be audited further by the Kard system, in the event of a missing cashback claim, incorrect cashback amount claim or other mis-match claims.<br/>
     * <b>Required scopes:</b> <code>audit:write</code>
     */
    public CompletableFuture<CreateAuditResponseBody> createAudits(
            String organizationId, String userId, CreateAuditRequestBody request) {
        return this.rawClient.createAudits(organizationId, userId, request).thenApply(response -> response.body());
    }

    /**
     * Call this endpoint to request that a particular transaction be audited further by the Kard system, in the event of a missing cashback claim, incorrect cashback amount claim or other mis-match claims.<br/>
     * <b>Required scopes:</b> <code>audit:write</code>
     */
    public CompletableFuture<CreateAuditResponseBody> createAudits(
            String organizationId, String userId, CreateAuditRequestBody request, RequestOptions requestOptions) {
        return this.rawClient
                .createAudits(organizationId, userId, request, requestOptions)
                .thenApply(response -> response.body());
    }

    /**
     * Retrieve rewarded transaction history for a specific user. Returns only SETTLED transactions within the last 12 months.
     * <br/>
     * <b>Required scopes:</b> <code>transaction:read</code>
     * <br/>
     * <b>Query Limit:</b> Maximum of 12 months of transaction data can be queried.
     */
    public CompletableFuture<GetEarnedRewardsResponse> getEarnedRewards(String organizationId, String userId) {
        return this.rawClient.getEarnedRewards(organizationId, userId).thenApply(response -> response.body());
    }

    /**
     * Retrieve rewarded transaction history for a specific user. Returns only SETTLED transactions within the last 12 months.
     * <br/>
     * <b>Required scopes:</b> <code>transaction:read</code>
     * <br/>
     * <b>Query Limit:</b> Maximum of 12 months of transaction data can be queried.
     */
    public CompletableFuture<GetEarnedRewardsResponse> getEarnedRewards(
            String organizationId, String userId, RequestOptions requestOptions) {
        return this.rawClient
                .getEarnedRewards(organizationId, userId, requestOptions)
                .thenApply(response -> response.body());
    }

    /**
     * Retrieve rewarded transaction history for a specific user. Returns only SETTLED transactions within the last 12 months.
     * <br/>
     * <b>Required scopes:</b> <code>transaction:read</code>
     * <br/>
     * <b>Query Limit:</b> Maximum of 12 months of transaction data can be queried.
     */
    public CompletableFuture<GetEarnedRewardsResponse> getEarnedRewards(
            String organizationId, String userId, GetEarnedRewardsRequest request) {
        return this.rawClient.getEarnedRewards(organizationId, userId, request).thenApply(response -> response.body());
    }

    /**
     * Retrieve rewarded transaction history for a specific user. Returns only SETTLED transactions within the last 12 months.
     * <br/>
     * <b>Required scopes:</b> <code>transaction:read</code>
     * <br/>
     * <b>Query Limit:</b> Maximum of 12 months of transaction data can be queried.
     */
    public CompletableFuture<GetEarnedRewardsResponse> getEarnedRewards(
            String organizationId, String userId, GetEarnedRewardsRequest request, RequestOptions requestOptions) {
        return this.rawClient
                .getEarnedRewards(organizationId, userId, request, requestOptions)
                .thenApply(response -> response.body());
    }
}
